-- Drop table

-- DROP TABLE master.dbo.MASTER GO

CREATE TABLE master.dbo.MASTER (
	MASTER_ID bigint IDENTITY(0,1) NOT NULL,
	MASTER_USERNAME varchar(100) NOT NULL,
	MASTER_HASH_PASSWORD varchar(100) NOT NULL,
	MASTER_SALT_PASSWORD varchar(100) NOT NULL,
	MASTER_EMAIL varchar(100) NOT NULL,
	IS_ENABLED int NOT NULL,
	CORRELATION_ID varchar(100) NOT NULL,
	CONSTRAINT Master_PK PRIMARY KEY (MASTER_ID),
	CONSTRAINT Master_UN UNIQUE (CORRELATION_ID)
) 

CREATE TABLE master.dbo.[USER] (
	USER_ID bigint IDENTITY(0,1) NOT NULL,
	USER_USERNAME varchar(12) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	USER_HASH_PASSWORD varchar(200) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	USER_SALT_PASSWORD varchar(200) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	USER_EMAIL varchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	INSERT_DATE varchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	LAST_CHANGE_DATE varchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	BIRTHDATE varchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	CORRELATION_ID varchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	CONSTRAINT USER_CORRELATION_UN UNIQUE (CORRELATION_ID),
	CONSTRAINT USER_EMAIL_UN UNIQUE (USER_EMAIL),
	CONSTRAINT USER_PK PRIMARY KEY (USER_ID),
	CONSTRAINT USER_USERNAM_UN UNIQUE (USER_USERNAME)
) GO
CREATE UNIQUE INDEX USER_CORRELATION_UN ON master.dbo.[USER] (CORRELATION_ID) GO
CREATE UNIQUE INDEX USER_EMAIL_UN ON master.dbo.[USER] (USER_EMAIL) GO
CREATE UNIQUE INDEX USER_USERNAM_UN ON master.dbo.[USER] (USER_USERNAME) GO


CREATE TABLE master.dbo.MASTER_USER (
	MASTER_USER_ID bigint IDENTITY(0,1) NOT NULL,
	CORRELATION_ID varchar(100) NOT NULL,
	USER_ID bigint NOT NULL,
	MASTER_ID bigint NOT NULL,
	INSERT_DATE varchar(100) NOT NULL,
	START_DATE varchar(100) NULL,
	END_DATE varchar(100) NULL,
	LAST_PAYMENT_DATE varchar(100) NULL,
	LAST_PAYMENT_AMOUNT decimal(100,2) NULL,
	PRICE decimal(100,2) NULL,
	CONSTRAINT MASTER_USER_PK PRIMARY KEY (MASTER_USER_ID),
	CONSTRAINT MASTER_USER_UN UNIQUE (CORRELATION_ID),
	CONSTRAINT MASTER_USER_FK FOREIGN KEY (MASTER_ID) REFERENCES master.dbo.MASTER(MASTER_ID),
	CONSTRAINT MASTER_USER_FK_1 FOREIGN KEY (USER_ID) REFERENCES master.dbo.[USER](USER_ID)
) GO

